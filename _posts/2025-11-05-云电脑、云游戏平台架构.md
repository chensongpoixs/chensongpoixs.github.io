---
layout:     post
title:      云电脑、云游戏 平台架构
subtitle:   云电脑、云游戏 平台架构
date:       2025-11-05
times:      01::56::35
author:     chensong
header-img: img/2019-02-02/bg_socketopt.jpg
catalog:    true
tags:
    - 云电脑
    - 云游戏
---






# 云电脑、云游戏 平台架构


@[TOC](云电脑、云游戏 平台架构)


</font>

<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">


 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/3094dca73a31417fba3d71c99737231c.png#pic_center)

   ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/c25be62981e84286a03f45ad086cff40.png)

 


# 前言
  
最近在弄云电脑厂家的远程控制服务架构搭建

上面是云电脑一个架构图、公安系统的接入没有画， 其实是在中转服务上接入的。据说整机房建设10万台的机器，目前已经建设好了一万台机器、目前云服务架构挑战还是非常大的

难点：

1. 低延迟 （100ms）
2. 基本已经决定使用中转模式（后台可以进行用户登录录像储备功能）
3. 并发量暂时支持一万台机器的转发的能力


## 一、云电脑整个系统服务

1、被控制端（win）
2、控制端（win/android/ios）
3、打洞服务器
4、媒体和鼠标转发服务
5、信令服务
6、设备管理服务
7、后台的监控桌面


## 二、被控端核心技术点

1、桌面采集技术（dxgi）
2、win系统音频采集
3、视频编码（H264/H265/AV1）, 音频编码（opus）
4、视频编码硬件加速适配（NVIDIA、Intel）
5、鼠标和键盘事件透传（DataChannel）
6、网络传输技术采用RTC
7、P2p和媒体转发
8、鼠标事件和键盘（系统事件函数mouse_event/驱动/ViGEm技术）
9、显示器（驱动/displaydevice）
10、键盘、鼠标、游戏手柄的统一管理和信号转换，适配Xbox 360、DualShock 4等主流协议（inputtino/ViGEmClient）
11、服务管理（system/server/ui）


## 三、首帧时长优化

 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/cca5c67ac7fe4beeaa3a8f6f5b48488e.png)



## 四、操作延迟

 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/63a41082b99342049cda564036dea1a3.png)


## 五、影响时延的关键因素 
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/ed707435a02747f49545334639a7c435.png)


## 六、响应时延优化方法  - 网络传输时延优化

 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/4eaad6bd339a42898de226a0e7328f7f.png)


## 七、响应时延优化方法  - 视频编码器优化


 ![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/0363972f5fd64e53b6e3c31f5fbf4458.png)




# 总结 

[项目使用到协议部分：https://github.com/chensongpoixs/libmedia_transfer_protocol](https://github.com/chensongpoixs/libmedia_transfer_protocol)